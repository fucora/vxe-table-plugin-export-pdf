"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.VXETablePluginExportPDF = void 0;

var _xeUtils = _interopRequireDefault(require("xe-utils/methods/xe-utils"));

var _jspdf = _interopRequireDefault(require("jspdf"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function getFooterCellValue($table, opts, rows, column) {
  var cellValue = _xeUtils["default"].toString(rows[$table.$getColumnIndex(column)]);

  return cellValue;
}

function exportPDF(params) {
  var colWidth = 0;
  var $table = params.$table,
      options = params.options,
      columns = params.columns,
      datas = params.datas;
  var treeConfig = $table.treeConfig,
      treeOpts = $table.treeOpts;
  var type = options.type,
      filename = options.filename,
      isHeader = options.isHeader,
      isFooter = options.isFooter,
      original = options.original,
      message = options.message,
      footerFilterMethod = options.footerFilterMethod;
  var footList = [];
  var headers = columns.map(function (column) {
    var title = _xeUtils["default"].toString(original ? column.property : column.getTitle()) || ' ';
    colWidth += column.renderWidth;
    return {
      name: column.id,
      prompt: title,
      width: column.renderWidth
    };
  });
  var rowList = [];
  var colRatio = colWidth / 100;
  headers.forEach(function (column) {
    column.width = Math.floor(column.width / colRatio * 4) - 1;
  });

  if (treeConfig) {
    rowList = datas.map(function (row) {
      var item = {};
      columns.forEach(function (column) {
        item[column.id] = column.treeNode ? ' '.repeat(row._level * treeOpts.indent / 8) + row[column.id] : row[column.id];
      });
      return item;
    });
  } else {
    rowList = datas;
  }

  if (isFooter) {
    var footerData = $table.footerData;
    var footers = footerFilterMethod ? footerData.filter(footerFilterMethod) : footerData;
    footers.forEach(function (rows) {
      var item = {};
      columns.forEach(function (column) {
        item[column.id] = getFooterCellValue($table, options, rows, column);
      });
      footList.push(item);
    });
  } // 转换pdf

  /* eslint-disable new-cap */


  var doc = new _jspdf["default"]({
    putOnlyUsedFonts: true,
    orientation: 'landscape'
  });
  doc.table(1, 1, rowList.concat(footList), headers, {
    printHeaders: isHeader,
    autoSize: false
  });
  doc.save("".concat(filename, ".").concat(type));

  if (message !== false) {
    $table.$XModal.message({
      message: i18n('vxe.table.expSuccess'),
      status: 'success'
    });
  }
}

function handleExportEvent(params) {
  if (params.options.type === 'pdf') {
    exportPDF(params);
    return false;
  }
}
/**
 * 基于 vxe-table 表格的增强插件，支持导出 pdf 格式
 */


var VXETablePluginExportPDF = {
  install: function install(xtable) {
    Object.assign(xtable.types, {
      pdf: 0
    });
    xtable.interceptor.mixin({
      'event.export': handleExportEvent
    });
    VXETablePluginExportPDF.t = xtable.t;
  }
};
exports.VXETablePluginExportPDF = VXETablePluginExportPDF;

function i18n(key) {
  if (VXETablePluginExportPDF.t) {
    return VXETablePluginExportPDF.t(key);
  }
}

if (typeof window !== 'undefined' && window.VXETable) {
  window.VXETable.use(VXETablePluginExportPDF);
}

var _default = VXETablePluginExportPDF;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRzIl0sIm5hbWVzIjpbImdldEZvb3RlckNlbGxWYWx1ZSIsIiR0YWJsZSIsIm9wdHMiLCJyb3dzIiwiY29sdW1uIiwiY2VsbFZhbHVlIiwiWEVVdGlscyIsInRvU3RyaW5nIiwiJGdldENvbHVtbkluZGV4IiwiZXhwb3J0UERGIiwicGFyYW1zIiwiY29sV2lkdGgiLCJvcHRpb25zIiwiY29sdW1ucyIsImRhdGFzIiwidHJlZUNvbmZpZyIsInRyZWVPcHRzIiwidHlwZSIsImZpbGVuYW1lIiwiaXNIZWFkZXIiLCJpc0Zvb3RlciIsIm9yaWdpbmFsIiwibWVzc2FnZSIsImZvb3RlckZpbHRlck1ldGhvZCIsImZvb3RMaXN0IiwiaGVhZGVycyIsIm1hcCIsInRpdGxlIiwicHJvcGVydHkiLCJnZXRUaXRsZSIsInJlbmRlcldpZHRoIiwibmFtZSIsImlkIiwicHJvbXB0Iiwid2lkdGgiLCJyb3dMaXN0IiwiY29sUmF0aW8iLCJmb3JFYWNoIiwiTWF0aCIsImZsb29yIiwicm93IiwiaXRlbSIsInRyZWVOb2RlIiwicmVwZWF0IiwiX2xldmVsIiwiaW5kZW50IiwiZm9vdGVyRGF0YSIsImZvb3RlcnMiLCJmaWx0ZXIiLCJwdXNoIiwiZG9jIiwianNQREYiLCJwdXRPbmx5VXNlZEZvbnRzIiwib3JpZW50YXRpb24iLCJ0YWJsZSIsImNvbmNhdCIsInByaW50SGVhZGVycyIsImF1dG9TaXplIiwic2F2ZSIsIiRYTW9kYWwiLCJpMThuIiwic3RhdHVzIiwiaGFuZGxlRXhwb3J0RXZlbnQiLCJWWEVUYWJsZVBsdWdpbkV4cG9ydFBERiIsImluc3RhbGwiLCJ4dGFibGUiLCJPYmplY3QiLCJhc3NpZ24iLCJ0eXBlcyIsInBkZiIsImludGVyY2VwdG9yIiwibWl4aW4iLCJ0Iiwia2V5Iiwid2luZG93IiwiVlhFVGFibGUiLCJ1c2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7OztBQUVBLFNBQVNBLGtCQUFULENBQTZCQyxNQUE3QixFQUEwQ0Ms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LCJmaWxlIjoiaW5kZXguY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFhFVXRpbHMgZnJvbSAneGUtdXRpbHMvbWV0aG9kcy94ZS11dGlscydcclxuaW1wb3J0IFZYRVRhYmxlIGZyb20gJ3Z4ZS10YWJsZS9saWIvdnhlLXRhYmxlJ1xyXG5pbXBvcnQganNQREYgZnJvbSAnanNwZGYnXHJcblxyXG5mdW5jdGlvbiBnZXRGb290ZXJDZWxsVmFsdWUgKCR0YWJsZTogYW55LCBvcHRzOiBhbnksIHJvd3M6IGFueVtdLCBjb2x1bW46IGFueSkge1xyXG4gIHZhciBjZWxsVmFsdWUgPSBYRVV0aWxzLnRvU3RyaW5nKHJvd3NbJHRhYmxlLiRnZXRDb2x1bW5JbmRleChjb2x1bW4pXSlcclxuICByZXR1cm4gY2VsbFZhbHVlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4cG9ydFBERiAocGFyYW1zOiBhbnkpIHtcclxuICBsZXQgY29sV2lkdGg6IG51bWJlciA9IDBcclxuICBjb25zdCB7ICR0YWJsZSwgb3B0aW9ucywgY29sdW1ucywgZGF0YXMgfSA9IHBhcmFtc1xyXG4gIGNvbnN0IHsgdHJlZUNvbmZpZywgdHJlZU9wdHMgfSA9ICR0YWJsZVxyXG4gIGNvbnN0IHsgdHlwZSwgZmlsZW5hbWUsIGlzSGVhZGVyLCBpc0Zvb3Rlciwgb3JpZ2luYWwsIG1lc3NhZ2UsIGZvb3RlckZpbHRlck1ldGhvZCB9ID0gb3B0aW9uc1xyXG4gIGNvbnN0IGZvb3RMaXN0OiBhbnlbXSA9IFtdXHJcbiAgY29uc3QgaGVhZGVyczogYW55W10gPSBjb2x1bW5zLm1hcCgoY29sdW1uOiBhbnkpID0+IHtcclxuICAgIGNvbnN0IHRpdGxlOiBzdHJpbmcgPSBYRVV0aWxzLnRvU3RyaW5nKG9yaWdpbmFsID8gY29sdW1uLnByb3BlcnR5IDogY29sdW1uLmdldFRpdGxlKCkpIHx8ICcgJ1xyXG4gICAgY29sV2lkdGggKz0gY29sdW1uLnJlbmRlcldpZHRoXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiBjb2x1bW4uaWQsXHJcbiAgICAgIHByb21wdDogdGl0bGUsXHJcbiAgICAgIHdpZHRoOiBjb2x1bW4ucmVuZGVyV2lkdGhcclxuICAgIH1cclxuICB9KVxyXG4gIGxldCByb3dMaXN0OiBhbnlbXSA9IFtdXHJcbiAgY29uc3QgY29sUmF0aW8gPSBjb2xXaWR0aCAvIDEwMFxyXG4gIGhlYWRlcnMuZm9yRWFjaCgoY29sdW1uOiBhbnkpID0+IHtcclxuICAgIGNvbHVtbi53aWR0aCA9IE1hdGguZmxvb3IoY29sdW1uLndpZHRoIC8gY29sUmF0aW8gKiA0KSAtIDFcclxuICB9KVxyXG4gIGlmICh0cmVlQ29uZmlnKSB7XHJcbiAgICByb3dMaXN0ID0gZGF0YXMubWFwKChyb3c6IGFueSkgPT4ge1xyXG4gICAgICBjb25zdCBpdGVtOiBhbnkgPSB7fVxyXG4gICAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbjogYW55KSA9PiB7XHJcbiAgICAgICAgaXRlbVtjb2x1bW4uaWRdID0gY29sdW1uLnRyZWVOb2RlID8gKCcgJy5yZXBlYXQocm93Ll9sZXZlbCAqIHRyZWVPcHRzLmluZGVudCAvIDgpICsgcm93W2NvbHVtbi5pZF0pIDogcm93W2NvbHVtbi5pZF1cclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIGl0ZW1cclxuICAgIH0pXHJcbiAgfSBlbHNlIHtcclxuICAgIHJvd0xpc3QgPSBkYXRhc1xyXG4gIH1cclxuICBpZiAoaXNGb290ZXIpIHtcclxuICAgIGNvbnN0IGZvb3RlckRhdGE6IGFueVtdID0gJHRhYmxlLmZvb3RlckRhdGFcclxuICAgIGNvbnN0IGZvb3RlcnM6IGFueVtdID0gZm9vdGVyRmlsdGVyTWV0aG9kID8gZm9vdGVyRGF0YS5maWx0ZXIoZm9vdGVyRmlsdGVyTWV0aG9kKSA6IGZvb3RlckRhdGFcclxuICAgIGZvb3RlcnMuZm9yRWFjaCgocm93czogYW55W10pID0+IHtcclxuICAgICAgY29uc3QgaXRlbTogYW55ID0ge31cclxuICAgICAgY29sdW1ucy5mb3JFYWNoKChjb2x1bW46IGFueSkgPT4ge1xyXG4gICAgICAgIGl0ZW1bY29sdW1uLmlkXSA9IGdldEZvb3RlckNlbGxWYWx1ZSgkdGFibGUsIG9wdGlvbnMsIHJvd3MsIGNvbHVtbilcclxuICAgICAgfSlcclxuICAgICAgZm9vdExpc3QucHVzaChpdGVtKVxyXG4gICAgfSlcclxuICB9XHJcbiAgLy8g6L2s5o2icGRmXHJcbiAgLyogZXNsaW50LWRpc2FibGUgbmV3LWNhcCAqL1xyXG4gIGNvbnN0IGRvYyA9IG5ldyBqc1BERih7IHB1dE9ubHlVc2VkRm9udHM6IHRydWUsIG9yaWVudGF0aW9uOiAnbGFuZHNjYXBlJyB9KVxyXG4gIGRvYy50YWJsZSgxLCAxLCByb3dMaXN0LmNvbmNhdChmb290TGlzdCksIGhlYWRlcnMsIHsgcHJpbnRIZWFkZXJzOiBpc0hlYWRlciwgYXV0b1NpemU6IGZhbHNlIH0pXHJcbiAgZG9jLnNhdmUoYCR7ZmlsZW5hbWV9LiR7dHlwZX1gKVxyXG4gIGlmIChtZXNzYWdlICE9PSBmYWxzZSkge1xyXG4gICAgJHRhYmxlLiRYTW9kYWwubWVzc2FnZSh7IG1lc3NhZ2U6IGkxOG4oJ3Z4ZS50YWJsZS5leHBTdWNjZXNzJyksIHN0YXR1czogJ3N1Y2Nlc3MnIH0pXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFeHBvcnRFdmVudCAocGFyYW1zOiBhbnkpIHtcclxuICBpZiAocGFyYW1zLm9wdGlvbnMudHlwZSA9PT0gJ3BkZicpIHtcclxuICAgIGV4cG9ydFBERihwYXJhbXMpXHJcbiAgICByZXR1cm4gZmFsc2VcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDln7rkuo4gdnhlLXRhYmxlIOihqOagvOeahOWinuW8uuaPkuS7tu+8jOaUr+aMgeWvvOWHuiBwZGYg5qC85byPXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVlhFVGFibGVQbHVnaW5FeHBvcnRQREY6IGFueSA9IHtcclxuICBpbnN0YWxsICh4dGFibGU6IHR5cGVvZiBWWEVUYWJsZSkge1xyXG4gICAgT2JqZWN0LmFzc2lnbih4dGFibGUudHlwZXMsIHsgcGRmOiAwIH0pXHJcbiAgICB4dGFibGUuaW50ZXJjZXB0b3IubWl4aW4oe1xyXG4gICAgICAnZXZlbnQuZXhwb3J0JzogaGFuZGxlRXhwb3J0RXZlbnRcclxuICAgIH0pXHJcbiAgICBWWEVUYWJsZVBsdWdpbkV4cG9ydFBERi50ID0geHRhYmxlLnRcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGkxOG4gKGtleTogc3RyaW5nKSB7XHJcbiAgaWYgKFZYRVRhYmxlUGx1Z2luRXhwb3J0UERGLnQpIHtcclxuICAgIHJldHVybiBWWEVUYWJsZVBsdWdpbkV4cG9ydFBERi50KGtleSlcclxuICB9XHJcbn1cclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVlhFVGFibGUpIHtcclxuICB3aW5kb3cuVlhFVGFibGUudXNlKFZYRVRhYmxlUGx1Z2luRXhwb3J0UERGKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBWWEVUYWJsZVBsdWdpbkV4cG9ydFBERlxyXG4iXX0=
