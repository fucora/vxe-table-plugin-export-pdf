!function(e,t){var n;"function"==typeof define&&define.amd?define("vxe-table-plugin-export-pdf",["exports","xe-utils","jspdf"],t):"undefined"!=typeof exports?t(exports,require("xe-utils"),require("jspdf")):(t((n={exports:{}}).exports,e.XEUtils,e.jsPDF),e.VXETablePluginExportPDF=n.exports.default)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,T,j){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginExportPDF=void 0,T=t(T),j=t(j);var D,n="undefined"!=typeof window,N={},X={};function o(e){var t,i,n=0,o=N.fonts,a=N.beforeMethod,r=e.options,d=e.columns,s=e.datas,f=!1!==r.message,u=e.$table,l=u.treeConfig,p=u.treeOpts,c=r.type,m=r.filename,v=r.isHeader,g=r.isFooter,x=r.original,b=r.footerFilterMethod,h=[],w=d.map(function(e){var t=T.default.toString(x?e.property:e.getTitle())||" ";return n+=e.renderWidth,{name:e.id,prompt:t,width:e.renderWidth}}),y=[],E=n/100;w.forEach(function(e){e.width=Math.floor(e.width/E*4)-1}),y=l?s.map(function(t){var n={};return d.forEach(function(e){n[e.id]=e.treeNode?" ".repeat(t._level*p.indent/8)+t[e.id]:t[e.id]}),n}):s,g&&(t=u.getTableData().footerData,(b?t.filter(b):t).forEach(function(i){var a={};d.forEach(function(e){var t,n,o;a[e.id]=(t=u,n=i,o=e,T.default.toString(n[t.$getColumnIndex(o)]))}),h.push(a)}));var P=r.fontName||N.fontName;o&&P&&(i=o.find(function(e){return e.fontName===P}));function F(){var e,t,n,o=new j.default({putOnlyUsedFonts:!0,orientation:"landscape"});i&&(e=i.fontName,n=void 0===(t=i.fontStyle)?"normal":t,X[e]&&(o.addFont(e+".ttf",e,n),o.setFont(e,n))),a&&!1===a({$pdf:o,$table:u,options:r,columns:d,datas:s})||(o.table(1,1,y.concat(h),w,{printHeaders:v,autoSize:!1}),o.save("".concat(m,".").concat(c)),f&&(D.modal.close("pdf"),D.modal.message({message:D.t("vxe.table.expSuccess"),status:"success"})))}f&&D.modal.message({id:"pdf",message:D.t("vxe.table.expLoading"),status:"loading",duration:-1}),function(e){if(e){var t=e.fontName,o=e.fontUrl;if(o&&!X[t])return X[t]=new Promise(function(e,t){var n=document.createElement("script");n.src=o,n.type="text/javascript",n.onload=e,n.onerror=t,document.body.appendChild(n)}),X[t]}return Promise.resolve()}(i).then(function(){f?setTimeout(F,1500):F()})}function i(e){if("pdf"===e.options.type)return o(e),!1}function a(e){Object.assign(N,e).fonts&&n&&!window.jsPDF&&(window.jsPDF=j.default)}var r={setup:a,install:function(e,t){var n=e.interceptor;D=e,Object.assign(e.types,{pdf:0}),n.mixin({"event.export":i}),t&&a(t)}};e.VXETablePluginExportPDF=r,n&&window.VXETable&&window.VXETable.use(r),e.default=r});