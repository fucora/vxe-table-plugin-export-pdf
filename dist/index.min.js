!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-export-pdf",["exports","xe-utils","jspdf"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils"),require("jspdf"));else{var n={exports:{}};t(n.exports,e.XEUtils,e.jsPDF),e.VXETablePluginExportPDF=n.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,P,T){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginExportPDF=void 0,P=t(P),T=t(T);var F,i="undefined"!=typeof window,j={},D={};function n(e){var n=0,t=j.fontName,o=j.fontUrl,i=e.options,a=e.columns,r=e.datas,f=!1!==i.message,s=e.$table,d=s.treeConfig,u=s.treeOpts,l=i.type,p=i.filename,c=i.isHeader,m=i.isFooter,v=i.original,g=i.footerFilterMethod,x=[],h=a.map(function(e){var t=P.default.toString(v?e.property:e.getTitle())||" ";return n+=e.renderWidth,{name:e.id,prompt:t,width:e.renderWidth}}),b=[],w=n/100;if(h.forEach(function(e){e.width=Math.floor(e.width/w*4)-1}),b=d?r.map(function(t){var n={};return a.forEach(function(e){n[e.id]=e.treeNode?" ".repeat(t._level*u.indent/8)+t[e.id]:t[e.id]}),n}):r,m){var E=s.getTableData().footerData;(g?E.filter(g):E).forEach(function(i){var r={};a.forEach(function(e){var t,n,o;r[e.id]=(t=s,n=i,o=e,P.default.toString(n[t.$getColumnIndex(o)]))}),x.push(r)})}function y(){var e=new T.default({putOnlyUsedFonts:!0,orientation:"landscape"});t&&o&&(e.addFont(t+".ttf",t,"normal"),e.setFont(t,"normal")),e.table(1,1,b.concat(x),h,{printHeaders:c,autoSize:!1}),e.save("".concat(p,".").concat(l)),f&&(F.modal.close("pdf"),F.modal.message({message:F.t("vxe.table.expSuccess"),status:"success"}))}f&&F.modal.message({id:"pdf",message:F.t("vxe.table.expLoading"),status:"loading",duration:-1}),function(){var e=j.fontName,o=j.fontUrl;if(e&&o&&!D[e])return D[e]=new Promise(function(e,t){var n=document.createElement("script");n.src=o,n.type="text/javascript",n.onload=e,n.onerror=t,document.body.appendChild(n)}),D[e];return new Promise(function(e){return setTimeout(e,1e3)})}().then(function(){f?setTimeout(y,1e3):y()})}function o(e){if("pdf"===e.options.type)return n(e),!1}function r(e){var t=Object.assign(j,e),n=t.fontName,o=t.fontUrl;if(n){if(!o)throw new Error("The fontUrl cannot be empty.");i&&!window.jsPDF&&(window.jsPDF=T.default)}}var a={setup:r,install:function(e,t){var n=e.interceptor;F=e,Object.assign(e.types,{pdf:0}),n.mixin({"event.export":o}),t&&r(t)}};e.VXETablePluginExportPDF=a,i&&window.VXETable&&window.VXETable.use(a);var f=a;e.default=f});