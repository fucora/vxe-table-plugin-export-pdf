!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-export-pdf",["exports","xe-utils","jspdf"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils"),require("jspdf"));else{var n={exports:{}};t(n.exports,e.XEUtils,e.jsPDF),e.VXETablePluginExportPDF=n.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,T,j){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginExportPDF=void 0,T=t(T),j=t(j);var D,n="undefined"!=typeof window,N={},X={};function o(e){var i,n=0,t=N.fonts,a=N.beforeMethod,r=e.options,f=e.columns,s=e.datas,d=!1!==r.message,u=e.$table,o=u.treeConfig,l=u.treeOpts,p=r.type,c=r.filename,m=r.isHeader,v=r.isFooter,g=r.original,x=r.footerFilterMethod,b=[],h=f.map(function(e){var t=T.default.toString(g?e.property:e.getTitle())||" ";return n+=e.renderWidth,{name:e.id,prompt:t,width:e.renderWidth}}),w=[],y=n/100;if(h.forEach(function(e){e.width=Math.floor(e.width/y*4)-1}),w=o?s.map(function(t){var n={};return f.forEach(function(e){n[e.id]=e.treeNode?" ".repeat(t._level*l.indent/8)+t[e.id]:t[e.id]}),n}):s,v){var E=u.getTableData().footerData;(x?E.filter(x):E).forEach(function(i){var a={};f.forEach(function(e){var t,n,o;a[e.id]=(t=u,n=i,o=e,T.default.toString(n[t.$getColumnIndex(o)]))}),b.push(a)})}var P=r.fontName||N.fontName;t&&P&&(i=t.find(function(e){return e.fontName===P}));function F(){var e=new j.default({putOnlyUsedFonts:!0,orientation:"landscape"});if(i){var t=i.fontName,n=i.fontStyle,o=void 0===n?"normal":n;X[t]&&(e.addFont(t+".ttf",t,o),e.setFont(t,o))}a&&!1===a({$pdf:e,$table:u,options:r,columns:f,datas:s})||(e.table(1,1,w.concat(b),h,{printHeaders:m,autoSize:!1}),e.save("".concat(c,".").concat(p)),d&&(D.modal.close("pdf"),D.modal.message({message:D.t("vxe.table.expSuccess"),status:"success"})))}d&&D.modal.message({id:"pdf",message:D.t("vxe.table.expLoading"),status:"loading",duration:-1}),function(e){if(e){var t=e.fontName,o=e.fontUrl;if(o&&!X[t])return X[t]=new Promise(function(e,t){var n=document.createElement("script");n.src=o,n.type="text/javascript",n.onload=e,n.onerror=t,document.body.appendChild(n)}),X[t]}return Promise.resolve()}(i).then(function(){d?setTimeout(F,1500):F()})}function i(e){if("pdf"===e.options.type)return o(e),!1}function a(e){Object.assign(N,e).fonts&&n&&!window.jsPDF&&(window.jsPDF=j.default)}var r={setup:a,install:function(e,t){var n=e.interceptor;D=e,Object.assign(e.types,{pdf:0}),n.mixin({"event.export":i}),t&&a(t)}};e.VXETablePluginExportPDF=r,n&&window.VXETable&&window.VXETable.use(r);var f=r;e.default=f});