!function(e,t){if("function"==typeof define&&define.amd)define("vxe-table-plugin-export-pdf",["exports","xe-utils","jspdf"],t);else if("undefined"!=typeof exports)t(exports,require("xe-utils"),require("jspdf"));else{var n={exports:{}};t(n.exports,e.XEUtils,e.jsPDF),e.VXETablePluginExportPDF=n.exports.default}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,T,j){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginExportPDF=void 0,T=t(T),j=t(j);var D,i="undefined"!=typeof window,X={},M={};function n(e){var n=0,t=X.fontName,o=X.fontStyle,i=void 0===o?"normal":o,a=X.beforeMethod,r=e.options,s=e.columns,d=e.datas,f=!1!==r.message,l=e.$table,u=l.treeConfig,p=l.treeOpts,c=r.type,m=r.filename,v=r.isHeader,g=r.isFooter,x=r.original,b=r.footerFilterMethod,h=[],w=s.map(function(e){var t=T.default.toString(x?e.property:e.getTitle())||" ";return n+=e.renderWidth,{name:e.id,prompt:t,width:e.renderWidth}}),y=[],E=n/100;if(w.forEach(function(e){e.width=Math.floor(e.width/E*4)-1}),y=u?d.map(function(t){var n={};return s.forEach(function(e){n[e.id]=e.treeNode?" ".repeat(t._level*p.indent/8)+t[e.id]:t[e.id]}),n}):d,g){var P=l.getTableData().footerData;(b?P.filter(b):P).forEach(function(i){var a={};s.forEach(function(e){var t,n,o;a[e.id]=(t=l,n=i,o=e,T.default.toString(n[t.$getColumnIndex(o)]))}),h.push(a)})}function F(){var e=new j.default({putOnlyUsedFonts:!0,orientation:"landscape"});t&&M[t]&&(e.addFont(t+".ttf",t,i),e.setFont(t,i)),a&&!1===a({$pdf:e,$table:l,options:r,columns:s,datas:d})||(e.table(1,1,y.concat(h),w,{printHeaders:v,autoSize:!1}),e.save("".concat(m,".").concat(c)),f&&(D.modal.close("pdf"),D.modal.message({message:D.t("vxe.table.expSuccess"),status:"success"})))}f&&D.modal.message({id:"pdf",message:D.t("vxe.table.expLoading"),status:"loading",duration:-1}),function(){var e=X.fontName,o=X.fontUrl;if(e&&o&&!M[e])return M[e]=new Promise(function(e,t){var n=document.createElement("script");n.src=o,n.type="text/javascript",n.onload=e,n.onerror=t,document.body.appendChild(n)}),M[e];return Promise.resolve()}().then(function(){f?setTimeout(F,1500):F()})}function o(e){if("pdf"===e.options.type)return n(e),!1}function a(e){var t=Object.assign(X,e),n=t.fontName,o=t.fontUrl;if(n){if(!o)throw new Error("The fontUrl cannot be empty.");i&&!window.jsPDF&&(window.jsPDF=j.default)}}var r={setup:a,install:function(e,t){var n=e.interceptor;D=e,Object.assign(e.types,{pdf:0}),n.mixin({"event.export":o}),t&&a(t)}};e.VXETablePluginExportPDF=r,i&&window.VXETable&&window.VXETable.use(r);var s=r;e.default=s});